<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>JobHub</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/css/bootstrap.min.css" rel="stylesheet" />
 <link rel="stylesheet" href="styles.css">
</head>
<body>
  <!-- Login Page -->
  <div id="loginPage" class="container mt-5">
    <div class="row justify-content-center">
      <div class="col-md-4">
        <div class="card shadow">
          <div class="card-body">
            <h3 class="text-center mb-4">Login</h3>
            <div class="mb-3">
              <label class="form-label">Username</label>
              <input type="text" id="username" class="form-control" />
            </div>
            <div class="mb-3">
              <label class="form-label">Password</label>
              <input type="password" id="password" class="form-control" />
            </div>
            <div class="mb-3">
              <label class="form-label">Role</label>
              <select id="role" class="form-select">
                <option value="user">User</option>
                <option value="recruiter">Recruiter</option>
              </select>
            </div>
            <button class="btn btn-primary w-100" onclick="login()">Login</button>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Dashboard -->
  <div id="dashboard" class="d-none">
    <nav class="bg-primary p-3 d-flex justify-content-between align-items-center">
      <h1 class="text-white">JobHub</h1>
      <ul class="list-unstyled list-inline mb-0">
        <li class="list-inline-item p-1">
          <a href="#" class="text-white text-decoration-none" onclick="showJobs()">Jobs</a>
        </li>
        <li class="list-inline-item p-1">
          <a href="#" class="text-white text-decoration-none">Companies</a>
        </li>
        <li class="list-inline-item p-1">
          <a href="#" class="text-white text-decoration-none">Salary</a>
        </li>
        <li class="list-inline-item p-1">
          <a href="#" class="text-white text-decoration-none">Resources</a>
        </li>
        <li class="list-inline-item p-1 d-none" id="myApplicationsNav">
          <a href="#" class="text-white text-decoration-none" onclick="showApplications()">My Applications</a>
        </li>
      </ul>
      <div>
        <button class="btn btn-outline-light me-2" id="loginBtn">Login</button>
        <a href="#" class="btn btn-light d-none" id="logoutBtn" onclick="logout()">Logout</a>
      </div>
    </nav>

    <div class="container-fluid mt-4">
      <div class="row">
        <!-- Sidebar Filters (only for User) -->
        <div class="col-md-3" id="filterSection">
          <div class="filter-box p-3 bg-white rounded shadow-sm">
            <h5>Job Type</h5>
            <div><input type="checkbox" class="filter" data-type="jobType" value="Full Time" /> Full Time</div>
            <div><input type="checkbox" class="filter" data-type="jobType" value="Part Time" /> Part Time</div>
            <div><input type="checkbox" class="filter" data-type="jobType" value="Contract" /> Contract</div>
            <div><input type="checkbox" class="filter" data-type="jobType" value="Remote" /> Remote</div>

            <h5 class="mt-3">Location</h5>
            <div><input type="checkbox" class="filter" data-type="location" value="San Francisco, CA" /> San Francisco</div>
            <div><input type="checkbox" class="filter" data-type="location" value="New York, NY" /> New York</div>
            <div><input type="checkbox" class="filter" data-type="location" value="London, UK" /> London</div>
            <div><input type="checkbox" class="filter" data-type="location" value="Berlin, Germany" /> Berlin</div>

            <h5 class="mt-3">Experience Level</h5>
            <div><input type="checkbox" class="filter" data-type="experience" value="Entry Level" /> Entry Level</div>
            <div><input type="checkbox" class="filter" data-type="experience" value="Mid Level" /> Mid Level</div>
            <div><input type="checkbox" class="filter" data-type="experience" value="Senior Level" /> Senior Level</div>
          </div>
        </div>

        <!-- Job Section -->
        <div class="col-md-6" id="jobsPage">
          <h3>Latest Job Openings</h3>
          <p id="jobCount"></p>

          <!-- Search bar -->
          <div class="mb-3">
            <input type="text" id="jobSearch" class="form-control" placeholder="Search jobs by title, company, or location" />
          </div>

          <div id="jobList"></div>
        </div>

        <!-- Job Description -->
        <div class="col-md-3 d-none" id="jobDetails"></div>

        <!-- My Applications Page -->
        <div class="col-md-9 d-none" id="applicationsPage">
          <h3>My Applications</h3>
          <div id="applicationsList" class="mt-3"></div>
        </div>

        <!-- Recruiter Add/Edit Job -->
        <div id="recruiterSection" class="d-none mt-4">
          <h4 id="formHeader">Add Job</h4>
          <input type="text" id="jobTitle" placeholder="Job Title" class="form-control mb-2" />
          <input type="text" id="company" placeholder="Company" class="form-control mb-2" />
          <input type="text" id="location" placeholder="Location" class="form-control mb-2" />
          <select id="jobType" class="form-select mb-2">
            <option value="Full Time">Full Time</option>
            <option value="Part Time">Part Time</option>
            <option value="Contract">Contract</option>
            <option value="Remote">Remote</option>
          </select>
          <input type="text" id="salary" placeholder="Salary" class="form-control mb-2" />
          <select id="experience" class="form-select mb-2">
            <option value="Entry Level">Entry Level</option>
            <option value="Mid Level">Mid Level</option>
            <option value="Senior Level">Senior Level</option>
          </select>
          <textarea id="description" placeholder="Job Description" class="form-control mb-2"></textarea>
          <button class="btn btn-primary" id="saveJobBtn" onclick="saveJob()">Add Job</button>
        </div>
      </div>
    </div>
  </div>

  <script>
    const jobs = [
      {
        title: "Senior Frontend Developer",
        company: "TechCorp Inc.",
        location: "San Francisco, CA",
        jobType: "Full Time",
        salary: "$120k - $180k",
        experience: "Senior Level",
        description: "Lead frontend team using React, ensure best UI/UX practices."
      },
      {
        title: "Product Manager",
        company: "InnovateLabs",
        location: "New York, NY",
        jobType: "Full Time",
        salary: "$130k - $200k",
        experience: "Mid Level",
        description: "Coordinate teams, manage product roadmap and stakeholders."
      }
    ];

    let applications = [];
    let editingIndex = null;

    function login() {
      const username = document.getElementById("username").value;
      const password = document.getElementById("password").value;
      const role = document.getElementById("role").value;

      if (role === "recruiter") {
        if (username !== "admin" || password !== "admin") {
          alert("Username or password is incorrect!");
          return;
        }
      }

      document.getElementById("loginPage").classList.add("d-none");
      document.getElementById("dashboard").classList.remove("d-none");
      document.getElementById("loginBtn").classList.add("d-none");
      document.getElementById("logoutBtn").classList.remove("d-none");

      if (role === "recruiter") {
        document.getElementById("filterSection").classList.add("d-none");
        document.getElementById("recruiterSection").classList.remove("d-none");
        document.getElementById("myApplicationsNav").classList.add("d-none");
      } else {
        document.getElementById("filterSection").classList.remove("d-none");
        document.getElementById("recruiterSection").classList.add("d-none");
        document.getElementById("myApplicationsNav").classList.remove("d-none");
      }

      renderJobs();
    }

    function logout() {
      document.getElementById("dashboard").classList.add("d-none");
      document.getElementById("loginPage").classList.remove("d-none");
      document.getElementById("loginBtn").classList.remove("d-none");
      document.getElementById("logoutBtn").classList.add("d-none");
      clearForm();
      editingIndex = null;
    }

    function addJob() {
      const job = getFormData();
      jobs.push(job);
      clearForm();
      renderJobs();
    }

    function getFormData() {
      return {
        title: document.getElementById("jobTitle").value,
        company: document.getElementById("company").value,
        location: document.getElementById("location").value,
        jobType: document.getElementById("jobType").value,
        salary: document.getElementById("salary").value,
        experience: document.getElementById("experience").value,
        description: document.getElementById("description").value
      };
    }

    function clearForm() {
      document.getElementById("jobTitle").value = "";
      document.getElementById("company").value = "";
      document.getElementById("location").value = "";
      document.getElementById("jobType").value = "Full Time";
      document.getElementById("salary").value = "";
      document.getElementById("experience").value = "Entry Level";
      document.getElementById("description").value = "";
      document.getElementById("formHeader").innerText = "Add Job";
      document.getElementById("saveJobBtn").innerText = "Add Job";
      editingIndex = null;
    }

    function deleteJob(index) {
      if (confirm("Are you sure you want to delete this job?")) {
        jobs.splice(index, 1);
        renderJobs();
      }
    }

    function editJob(index) {
      const job = jobs[index];
      document.getElementById("jobTitle").value = job.title;
      document.getElementById("company").value = job.company;
      document.getElementById("location").value = job.location;
      document.getElementById("jobType").value = job.jobType;
      document.getElementById("salary").value = job.salary;
      document.getElementById("experience").value = job.experience;
      document.getElementById("description").value = job.description;
      document.getElementById("formHeader").innerText = "Edit Job";
      document.getElementById("saveJobBtn").innerText = "Save Changes";
      editingIndex = index;
    }

    function saveJob() {
      const job = getFormData();
      if (editingIndex !== null) {
        jobs[editingIndex] = job;
      } else {
        jobs.push(job);
      }
      clearForm();
      renderJobs();
    }

    function applyJob(job) {
      applications.push(job);
      alert("Thank you for applying!");
    }

    function renderJobs(filterData = {}, searchQuery = "") {
      const jobList = document.getElementById("jobList");
      jobList.innerHTML = "";

      let filtered = jobs.filter(job => {
        for (let key in filterData) {
          if (filterData[key].length > 0 && !filterData[key].includes(job[key])) return false;
        }
        if (searchQuery) {
          return job.title.toLowerCase().includes(searchQuery) ||
                 job.company.toLowerCase().includes(searchQuery) ||
                 job.location.toLowerCase().includes(searchQuery);
        }
        return true;
      });

      filtered.forEach((job, index) => {
        let buttons = "";
        if (document.getElementById("role").value === "recruiter") {
          buttons = `
            <button class="btn btn-sm btn-warning me-1" onclick="event.stopPropagation(); editJob(${index})">Edit</button>
            <button class="btn btn-sm btn-danger" onclick="event.stopPropagation(); deleteJob(${index})">Delete</button>
          `;
        } else {
          buttons = `<button class="btn btn-sm btn-primary" onclick='event.stopPropagation(); applyJob(${JSON.stringify(job)})'>Apply</button>`;
        }

        jobList.innerHTML += `
          <div class="card job-card mb-3" onclick="showJobDetails(${index})">
            <div class="card-body">
              <h5>${job.title}</h5>
              <p class="text-primary">${job.company}</p>
              <p>üìç ${job.location} ‚Ä¢ ${job.jobType} ‚Ä¢ üí∞ ${job.salary}</p>
              <span class="badge bg-secondary">${job.experience}</span>
              <div class="mt-2">${buttons}</div>
            </div>
          </div>`;
      });

      document.getElementById("jobCount").innerText = `${filtered.length} jobs found`;
    }

    function showJobDetails(index) {
      const job = jobs[index];
      const jobDetails = document.getElementById("jobDetails");
      jobDetails.classList.remove("d-none");
      jobDetails.innerHTML = `
        <h4>${job.title}</h4>
        <p class="text-primary">${job.company}</p>
        <p><b>Location:</b> ${job.location}</p>
        <p><b>Type:</b> ${job.jobType}</p>
        <p><b>Salary:</b> ${job.salary}</p>
        <p><b>Experience:</b> ${job.experience}</p>
        <p><b>Description:</b> ${job.description}</p>
      `;
    }

    function showJobs() {
      document.getElementById("jobsPage").classList.remove("d-none");
      document.getElementById("applicationsPage").classList.add("d-none");
    }

    function showApplications() {
      document.getElementById("jobsPage").classList.add("d-none");
      document.getElementById("applicationsPage").classList.remove("d-none");
      const applicationsList = document.getElementById("applicationsList");
      applicationsList.innerHTML = "";

      if (applications.length === 0) {
        applicationsList.innerHTML = "<p>You have not applied for any jobs yet.</p>";
        return;
      }

      applications.forEach(job => {
        applicationsList.innerHTML += `
          <div class="card job-card mb-3">
            <div class="card-body">
              <h5>${job.title}</h5>
              <p class="text-primary">${job.company}</p>
              <p>üìç ${job.location} ‚Ä¢ ${job.jobType} ‚Ä¢ üí∞ ${job.salary}</p>
              <span class="badge bg-secondary">${job.experience}</span>
            </div>
          </div>`;
      });
    }

    document.addEventListener("DOMContentLoaded", () => {
      document.querySelectorAll(".filter").forEach(cb => {
        cb.addEventListener("change", () => {
          let filterData = { jobType: [], location: [], experience: [] };
          document.querySelectorAll(".filter:checked").forEach(c => {
            filterData[c.dataset.type].push(c.value);
          });
          renderJobs(filterData);
        });
      });

      document.getElementById("jobSearch").addEventListener("input", function () {
        let query = this.value.toLowerCase();
        let filterData = { jobType: [], location: [], experience: [] };
        document.querySelectorAll(".filter:checked").forEach(c => {
          filterData[c.dataset.type].push(c.value);
        });
        renderJobs(filterData, query);
      });
    });
  </script>
</body>
</html>
